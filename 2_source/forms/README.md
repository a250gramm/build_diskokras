# Модель отправки данных формы

## Идея

При отправке формы нужно явно знать:
- **куда** уходят данные (таблица/API);
- **какое поле формы** попадает в **какую ячейку** (колонку) целевой таблицы.

Для этого введены два конфига:

1. **target_tables.json** — описание целевых таблиц («страниц»). Таблица = одна «страница» с колонками-ячейками. Одна строка таблицы = одна запись (один заказ).
2. **form_submit_map.json** — маппинг: форма → целевая таблица и поле формы → колонка таблицы.

## Таблица как «страница»

- **Таблица** = место назначения данных (например, `order_shino`).
- **Колонки** = ячейки; в них при отправке попадают значения из полей формы.
- **Строки** = записи (после реальной отправки каждая отправка добавляет строку).

Визуально можно отрисовать таблицу так:
- заголовок — названия колонок из `target_tables.json`;
- под каждой ячейкой — подпись «← поле формы» из `form_submit_map.map`.

Так сразу видно: «в эту ячейку уходит значение из этого поля формы».

## Файлы

| Файл | Назначение |
|------|------------|
| `target_tables.json` | Схема таблиц: id таблицы, колонки (id, title, type). |
| `form_submit_map.json` | Для каждой формы: `target_table`, `target_url`, `method`, `map`: путь/name поля формы → id колонки. |

## Пример маппинга (form_form2 → order_shino)

| Поле формы (objects.json) | Колонка таблицы (ячейка) |
|---------------------------|--------------------------|
| 1.div_wr-fields.1.div_field-price.field | shinomontazh |
| 1.div_wr-fields.2.div_field-price.field | prokat |
| 1.div_wr-fields.3.div_field-price.field | soski |
| 1.div_wr-fields.4.div_field-price.field | argon |
| 1.div_wr-fields.5.div_field-price.field | prokat_2_1 |
| 1.div_wr-fields.5.div_field-price.field_2 | prokat_2_2 |
| 1.div_wr-fields.6.div_field-price.label | total |
| pay_method (name у radio) | id_pay_met |

## Визуализация «таблица — страница»

Файл **form_submit_view.html** — одностраничная визуализация: таблица `order_shino` с колонками и под каждой ячейкой подпись «← поле формы». Показывает, в какие ячейки уходят данные при отправке form_form2. Открыть в браузере: `2_source/forms/form_submit_view.html`.

## Дальнейшие шаги

1. **Билдер**: при сборке формы вешать на `<form>` атрибуты, например `data-submit-target="order_shino"`, `data-submit-url="/api/order_shino"` и `data-submit-map='{"field_key":"column_id",...}'` (или подключать form_submit_map.json на фронте).
2. **JS при submit**: собирать объект по маппингу (поле → колонка) и отправлять на `target_url`.
3. **Страница-визуализация**: по `target_tables` + `form_submit_map` отрисовать таблицу с подписями «поле формы → ячейка».
